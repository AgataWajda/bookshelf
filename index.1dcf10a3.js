const e=document.querySelector(".pop-up-modal"),t=document.querySelector(".backdrop-modal"),o=(document.querySelector("#allBooks"),document.querySelector(".close-pop-up-modal-btn")),n=document.querySelector(".add-book-button"),s=document.querySelector(".storage-comment"),r=document.querySelector(".remove-button"),i="storage-book-data";let a={};function c(){e.classList.add("is-hidden"),t.classList.add("is-hidden")}document.querySelector(".pop-up-btn").addEventListener("click",(function(){e.classList.remove("is-hidden"),t.classList.remove("is-hidden")})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&c()})),t.addEventListener("click",(function(e){e.target===t&&c()})),o.addEventListener("click",c),n.addEventListener("click",(function(){const e=JSON.parse(localStorage.getItem(i)),t=a;(e||0!==e.length)&&(n.style.display="block",r.style.display="none",e.push(t),localStorage.setItem(i,JSON.stringify(e)),n.style.display="none",r.style.display="block",s.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.")})),r.addEventListener("click",(function(){s.textContent="";const e=a.id,t=JSON.parse(localStorage.getItem(i)),o=t.findIndex((t=>t.id===e));t.splice(o,1),localStorage.setItem(i,JSON.stringify(t)),n.style.display="block",r.style.display="none"}));const l="https://books-backend.p.goit.global/books/";class d{async fetchWithTimeout(e,t){const{timeout:o=8e3}=t,n=new AbortController,s=setTimeout((()=>n.abort()),o),r=await fetch(e,{...t,signal:n.signal});return clearTimeout(s),r}async fetchByCategory(e){try{const t=await this.fetchWithTimeout(`${l}/category?category=${e}`,{timeout:6e3});if(!t.ok)throw new Error(`Network response was not OK - HTTP error: ${t.status}`);return await t.json()}catch(e){console.error("There has been a problem with your fetch operation:",e.message)}}async fetchBooksCategoryList(){try{const e=await this.fetchWithTimeout(`${l}/category-list`,{timeout:6e3});if(!e.ok)throw new Error(`Network response was not OK - HTTP error: ${e.status}`);return await e.json()}catch(e){console.error("There has been a problem with your fetch operation:",e)}}async fetchTopBooks(){try{const e=await this.fetchWithTimeout(`${l}/top-books`,{timeout:6e3});if(!e.ok)throw new Error(`Network response was not OK - HTTP error: ${e.status}`);return await e.json()}catch(e){console.error("There has been a problem with your fetch operation:",e)}}async fetchById(e){try{const t=await this.fetchWithTimeout(`${l}/${e}`,{timeout:6e3});if(!t.ok)throw new Error(`Network response was not OK - HTTP error: ${t.status}`);return await t.json()}catch(e){console.error("There has been a problem with your fetch operation:",e.message)}}}const u=new d,h=document.querySelector(".categories-list");h.addEventListener("click",(async function(e){if("LI"!==e.target.nodeName)return;const t=document.querySelector('.categories-list-item[selected="true"]');t&&t.removeAttribute("selected");e.target.setAttribute("selected","true");const o=e.target.textContent;try{await u.fetchByCategory(o);console.log("Selected category:",o)}catch(e){console.error(e)}}));!async function(){try{const e=await u.fetchBooksCategoryList();if(e.length<1)return h.innerHTML="Sorry, we didn't find anything",[];const t=e.map((e=>`\n      <li class="categories-list-item">${e.list_name}</li>\n    `)).join("");h.innerHTML=`<li class="categories-list-item" selected="true">All categories</li>${t}`,console.log("Categories loaded successfully.")}catch(e){return h.innerHTML=`Error: ${e.message}`,console.error(e),[]}}();const m=new d,p=document.querySelector(".best-sellers");!async function(){!function(e){const t=`\n    <h1 class="title-book">\n      Best Sellers <span class="title-book-span">Books</span>\n    </h1> \n    <ul class="books-container"> \n      ${e.map((e=>{return`\n          <li class="books-list"> \n            <h3 class="books-list-title">${e.list_name}</h3>\n            <div class="books-card-container" data-list-id="${e.list_name}">\n              ${t=e.books,t.map((e=>`\n      <a href="#" class="books-item-link" aria-label="books-item-link" rel="noopener noreferrer" data-id='${e._id}'>\n        <div class="books-card">\n          <img\n            src="${e.book_image}"\n            alt="${e.title}"\n            class="books-card-title-img"\n            width="180"\n            height="256"\n            loading="lazy"\n          />\n          <div class="books-overlay">\n            <p class="books-overlay-text">quick view</p>\n          </div>\n        </div> \n        <div class="books-descr">\n          <h3 class="books-card-title">${e.title}</h3>\n          <p class="books-card-author">${e.author}</p>\n        </div>\n      </a>`)).join("")}\n            </div>\n          </li>`;var t})).join("")}\n    </ul>`;p.insertAdjacentHTML("beforeend",t)}(await async function(){try{return await m.fetchTopBooks()}catch(e){console.error("Error downloading top books:",e)}}())}();const y=document.querySelector(".category-books-list__title"),k=document.querySelector(".category-books-list__list"),g=document.querySelector(".categories-list"),b=document.querySelector(".best-sellers"),f="https://books-backend.p.goit.global/books/category";g.addEventListener("click",(function(e){const t=e.target.textContent;if("All categories"===t)return b.style.display="block",void(y.innerHTML="");const o=t.split(" ").join("%20"),n=`<span class="paintedWord">${t}</span>`;y.innerHTML="",y.insertAdjacentHTML("beforeend",n),function(e){(function(e){return fetch(`${f}?category=${e}`).then((e=>e.json()))})(e).then((e=>{!function(e){const t=e.map((e=>`\n    <li data-id="${e._id}" class="category-books-list__item">\n      <div class="card__container card">\n        <div class="card__img-container">\n          <img src="${e.book_image}" alt="${e.title}" class="card__img">\n          <p class="img-hover">QUICK VIEW</p>\n        </div>\n        <div class="card__desc">\n          <h3 class="card__heading">${e.title}</h3>\n          <p class="card__author">${e.author}</p>\n        </div>\n      </div>\n    </li>\n  `)).join("");k.innerHTML=t}(e)})).catch((e=>console.error("Error fetching data:",e)))}(o),b.style.display="none"}));const _=document.querySelector(".down-btn"),w=document.querySelector(".up-btn"),v=document.querySelector(".charities__list");_.addEventListener("click",(()=>{setTimeout((function(){v.scrollTo(0,1e3)}),10),_.classList.add("is-hidden"),w.classList.remove("is-hidden")})),w.addEventListener("click",(()=>{setTimeout((function(){v.scrollTo(top)}),10),w.classList.add("is-hidden"),_.classList.remove("is-hidden")}));const T=new d;T.fetchByCategory("Business Books").then((e=>{const t=e.map((e=>({_id:e._id,title:e.title,author:e.author,book_image:e.book_image,description:e.description,category:e.list_name,publisher:e.publisher,price:e.price,marketAmazon:e.amazon_product_url,rank:e.rank})));return console.log("Business Books: ",t),t}));T.fetchByCategory("Audio Nonfiction").then((e=>{const t=e.map((e=>({_id:e._id,title:e.title,author:e.author,book_image:e.book_image,description:e.description,category:e.list_name,publisher:e.publisher,price:e.price,marketAmazon:e.amazon_product_url,rank:e.rank})));return console.log("Audio Nonfiction: ",t),t}));T.fetchBooksCategoryList().then((e=>{const t=e.map((e=>e.list_name));console.log("Category List: ",t)})),T.fetchById("643282b1e85766588626a0b6").then((e=>{const t={_id:e._id,title:e.title,author:e.author,book_image:e.book_image,description:e.description,category:e.list_name,publisher:e.publisher,price:e.price,marketAmazon:e.amazon_product_url,rank:e.rank};return console.log("book by id: ",t),t})),T.fetchTopBooks().then((e=>{console.log("Top List: ",e)}));
//# sourceMappingURL=index.1dcf10a3.js.map
