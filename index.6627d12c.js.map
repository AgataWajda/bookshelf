{"mappings":"AAAA,MAAMA,EAAaC,SAASC,cAAc,iBACpCC,EAAgBF,SAASC,cAAc,mBAEvCE,GADWH,SAASC,cAAc,aACpBD,SAASC,cAAc,iBACrCG,EAAgBJ,SAASC,cAAc,oBACvCI,EAAiBL,SAASC,cAAc,oBACxCK,EAAmBN,SAASC,cAAc,kBAC1CM,EAAmB,oBACzB,IAAIC,EAAW,CAAC,EAIJR,SAASC,cAAc,UAC/BQ,iBAAiB,SAErB,WACEV,EAAWW,UAAUC,OAAO,aAC5BT,EAAcQ,UAAUC,OAAO,YACjC,IAKAR,EAAYM,iBAAiB,SAJ7B,WACEV,EAAWW,UAAUE,IAAI,aACzBV,EAAcQ,UAAUE,IAAI,YAC9B,IAwGAR,EAAcK,iBAAiB,SA7B/B,WACE,MAAMI,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQV,IAClDW,EAAiBV,GACnBK,GAA8C,IAA3BA,EAAgBM,UACrCf,EAAcgB,MAAMC,QAAU,QAC9Bf,EAAiBc,MAAMC,QAAU,OACjCR,EAAgBS,KAAKJ,GACrBF,aAAaO,QAAQhB,EAAkBO,KAAKU,UAAUX,IACtDT,EAAcgB,MAAMC,QAAU,OAC9Bf,EAAiBc,MAAMC,QAAU,QACjChB,EAAeoB,YACb,8HAGN,IAgBAnB,EAAiBG,iBAAiB,SAdlC,WACEJ,EAAeoB,YAAc,GAE7B,MAAMC,EAAelB,EAASmB,GACxBC,EAAYd,KAAKC,MAAMC,aAAaC,QAAQV,IAC5CsB,EAAgBD,EAAUE,WAAUC,GAAQA,EAAKJ,KAAOD,IAC9DE,EAAUI,OAAOH,EAAe,GAChCb,aAAaO,QAAQhB,EAAkBO,KAAKU,UAAUI,IAEtDxB,EAAcgB,MAAMC,QAAU,QAC9Bf,EAAiBc,MAAMC,QAAU,MACnC","sources":["src/pop-up-modal.js"],"sourcesContent":["const popUpModal = document.querySelector('.pop-up-modal');\nconst backdropModal = document.querySelector('.backdrop-modal');\nconst allBooks = document.querySelector('#allBooks');\nconst closeButton = document.querySelector('#modal-close');\nconst addBookButton = document.querySelector('.add-book-button');\nconst storageComment = document.querySelector('.storage-comment');\nconst removeBookButton = document.querySelector('.remove-button');\nconst LOCALSTORAGE_KEY = 'storage-book-data';\nlet bookData = {};\nlet bookArray = [];\n\n//dodałam button, żeby sprawdzać jak wygląda modal//\nconst btn = document.querySelector('button');\nbtn.addEventListener('click', openPopUpModal);\n\nfunction openPopUpModal() {\n  popUpModal.classList.remove('is-hidden');\n  backdropModal.classList.remove('is-hidden');\n}\nfunction closePopUpModal() {\n  popUpModal.classList.add('is-hidden');\n  backdropModal.classList.add('is-hidden');\n}\ncloseButton.addEventListener('click', closePopUpModal);\n\nasync function createPopUpModal(bookId) {\n  allBooks.innerHTML = '';\n  try {\n    const data = await fetchBookById(bookId);\n    return data;\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}\nasync function fetchBookById(bookId) {\n  try {\n    bookData = {};\n    const response = await fetch(`https://books-backend.p.goit.global/books/${bookId}`);\n    const data = await response.json();\n    bookData = {\n      book_image: data.book_image,\n      title: data.title,\n      author: data.author,\n      description: data.description,\n      marketAmazon: data.buy_links[0].url,\n      marketAppleBooks: data.buy_links[1].url,\n      id: data._id,\n    };\n    return data;\n  } catch (error) {\n    console.error('Error', error);\n    throw error;\n  }\n}\n\nfunction createMarkup(data) {\n  const bookImage = data.book_image;\n  const bookTitle = data.title;\n  const bookAuthor = data.author;\n  const bookDescription = data.description;\n  const marketAmazon = data.buy_links[0].url;\n  const marketAppleBooks = data.buy_links[1].url;\n  allBooks.innerHTML = `  \n  <img src=\"${bookImage}\" alt=\"Book Image\" class=\"image\">\n  <div class=\"info-modal\">\n  <h2 class=\"title\">${bookTitle}</h2>\n  <p class=\"author\"> ${bookAuthor}</p>\n  <p class=\"description\">${bookDescription}</p>\n  <ul class=\"buy-links\"> <li class=\"buy-links-item\"><a href=\"${marketAmazon}\" target=\"_blank\"\n    > <img\n     width=\"62\"\n    height=\"19\"\n    srcset=\"\n    ./images/pop-up-modal/iconAmazon@x1.png 1x,\n    ./images/pop-up-modal/iconAmazon@x2.png 2x\n  \"\n   src=\"./images/pop-up-modal/iconAmazon@x1.png\"\n    alt=\"Amazon\"\n  /></a></li>\n  <li class=\"buy-links-item\"><a href=\"${marketAppleBooks}\" target=\"_blank\"\n    > <img\n    width=\"33\"\n    height=\"32\"\n    srcset=\"\n    ./images/pop-up-modal/iconAppleBooks@x1.png 1x,\n    ./images/pop-up-modal/iconAppleBooks@x2.png 2x\n  \"\n   src=\"./images/pop-up-modal/iconAppleBooks@x1.png\"\n    alt=\"AppleBooks\"\n  /></a></li>\n</ul>\n</div>\n  `;\n}\n\n\nfunction onAddBook() {\n  const searchBookArray = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n  const bookDataToSave = bookData;\n  if (searchBookArray || searchBookArray.length !== 0) {\n    addBookButton.style.display = 'block';\n    removeBookButton.style.display = 'none';\n    searchBookArray.push(bookDataToSave);\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(searchBookArray));\n    addBookButton.style.display = 'none';\n    removeBookButton.style.display = 'block';\n    storageComment.textContent =\n      'Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n  \n  }\n}\n\nfunction onRemoveBook() {\n  storageComment.textContent = '';\n\n  const bookToDelete = bookData.id;\n  const bookArray = JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY));\n  const indexToDelete = bookArray.findIndex(book => book.id === bookToDelete);\n  bookArray.splice(indexToDelete, 1);\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(bookArray));\n \n  addBookButton.style.display = 'block';\n  removeBookButton.style.display = 'none';\n}\n\naddBookButton.addEventListener('click', onAddBook);\nremoveBookButton.addEventListener('click', onRemoveBook);\n"],"names":["$ccfeea3a62041c82$var$popUpModal","document","querySelector","$ccfeea3a62041c82$var$backdropModal","$ccfeea3a62041c82$var$closeButton","$ccfeea3a62041c82$var$addBookButton","$ccfeea3a62041c82$var$storageComment","$ccfeea3a62041c82$var$removeBookButton","$ccfeea3a62041c82$var$LOCALSTORAGE_KEY","$ccfeea3a62041c82$var$bookData","addEventListener","classList","remove","add","searchBookArray","JSON","parse","localStorage","getItem","bookDataToSave","length","style","display","push","setItem","stringify","textContent","bookToDelete","id","bookArray","indexToDelete","findIndex","book","splice"],"version":3,"file":"index.6627d12c.js.map"}